import dedent from 'dedent-js'
import Layout from '../components/Layout'
import TabbedCodeExamples from '../components/TabbedCodeExamples'

export default Layout
export const meta = {
  title: 'Links',
  links: [
    { url: '#top', name: 'Making requests' },
    { url: '#url', name: 'URL' },
    { url: '#method', name: 'Method' },
    { url: '#data', name: 'Data' },
    { url: '#replace', name: 'Replace' },
    { url: '#preserve-state', name: 'Preserve state' },
    { url: '#preserve-scroll', name: 'Preserve scroll' },
  ],
}

# Requests

In addition to clicking links, it's also very common to manually make Inertia visits. The following methods are available. Take note of the defaults.

<TabbedCodeExamples
  examples={[
    {
      name: 'Vue',
      language: 'js',
      code: dedent`
        // import { Inertia } from 'inertia-vue'\n
        this.$inertia.visit(url, {
          method: 'get',
          data: {},
          replace: false,
          preserveState: false,
          preserveScroll: false,
        })\n
        this.$inertia.replace(url, {
          method: 'get',
          data: {},
          preserveState: true,
          preserveScroll: false,
        })\n
        this.$inertia.reload({
          method: 'get',
          data: {},
          preserveState: false,
          preserveScroll: false,
        })\n
        this.$inertia.post(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        this.$inertia.put(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        this.$inertia.patch(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        this.$inertia.delete(url, {
          replace: false,
          preserveState: false,
          preserveScroll: false,
        })
      `,
    },
    {
      name: 'React',
      language: 'js',
      code: dedent`
        import { Inertia } from 'inertia-react'\n
        Inertia.visit(url, {
          method: 'get',
          data: {},
          replace: false,
          preserveState: false,
          preserveScroll: false,
        })\n
        Inertia.replace(url, {
          method: 'get',
          data: {},
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.reload({
          method: 'get',
          data: {},
          preserveState: false,
          preserveScroll: false,
        })\n
        Inertia.post(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.put(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.patch(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.delete(url, {
          replace: false,
          preserveState: false,
          preserveScroll: false,
        })
      `,
    },
    {
      name: 'Svelte',
      language: 'js',
      code: dedent`
        import { Inertia } from 'inertia-svelte'\n
        Inertia.visit(url, {
          method: 'get',
          data: {},
          replace: false,
          preserveState: false,
          preserveScroll: false,
        })\n
        Inertia.replace(url, {
          method: 'get',
          data: {},
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.reload({
          method: 'get',
          data: {},
          preserveState: false,
          preserveScroll: false,
        })\n
        Inertia.post(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.put(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.patch(url, data, {
          replace: false,
          preserveState: true,
          preserveScroll: false,
        })\n
        Inertia.delete(url, {
          replace: false,
          preserveState: false,
          preserveScroll: false,
        })
      `,
    },
  ]}
/>

## URL

The request URL. The `reload` method will automatically use the current URL.

## Method

The request method, which should be `GET`, `POST`, `PUT`, `PATCH` or `DELETE`.

## Data

The request's data payload. This can be an `object`, or a `FormData` instance.

## Replace

By default page visits push (new) state (`window.history.pushState`) into the history, however it's also possible to replace state (`window.history.replaceState`) by setting the `replace` option to `true`. This will cause the visit to replace the current history state, instead of adding a new history state to the stack.

## Preserve state

By default page visits to the same page will force a fresh page component instance. However, in certain situations you may want to keep the existing page instance in order to preserve some local state. You can do this by setting the `preserveState` option to `true`.

## Preserve scroll

By default page visits will automatically reset the scroll position back to the top of the page (and any [scroll regions](/pages#scroll-regions) you've defined). You can use the `preserveScroll` option to disable this behaviour.
