import Layout from '../components/Layout'

export default Layout
export const meta = { title: 'Server-side setup' }

# Server-side setup

## Laravel

Install using Composer:

~~~bash
composer require inertiajs/inertia-laravel
~~~

### Setup root template

The first step to using Inertia is creating a root template. We recommend using `app.blade.php`. This template should include your assets, as well as the `@inertia` directive.

~~~html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link href="{{ mix('/css/app.css') }}" rel="stylesheet">
    <script src="{{ mix('/js/app.js') }}" defer></script>
</head>
<body>

@inertia

</body>
</html>
~~~

The `@inertia` directive is simply a helper for creating our base `div`. It includes a `data-page` attribute which contains the inital page information. Here's what that looks like.

~~~html
<div id="app" data-page="{{ json_encode($page) }}"></div>
~~~

If you'd like to use a different root view, you can change it using `Inertia::setRootView()`.

~~~php
Inertia\Inertia::setRootView('name');
~~~

### Add Inertia middleware

Next, add the `Inertia\Middleware` middleware to your `web` middleware group, found in the `/app/Http/Kernel.php` file. This middleware monitors for asset changes, and also fixes an edge case with 302 redirects. Be sure to include this middleware *after* any session related middleware.

~~~php
protected $middlewareGroups = [
    'web' => [
        // ...
        \Inertia\Middleware::class,
    ]
];
~~~
