import dedent from 'dedent-js'
import Layout from '../components/Layout'
import Notice from '../components/Notice'
import TabbedCodeExamples from '../components/TabbedCodeExamples'

export default Layout
export const meta = {
  title: 'Error handling',
  links: [{ url: '#in-development', name: 'In development' }, { url: '#in-production', name: 'In production' }],
}

# Error handling

## In development

One of the nice things about working with a server-side framework is the built-in exception handling you get for free. For example, Laravel ships with [Ignition](https://github.com/facade/ignition), a beautiful error reporting tool which displays a nicely formatted stack trace in local development.

The challenge is, if you're making an XHR request (which Inertia does), and you hit a server-side error, you're typically left digging through the network tab in your browser's devtools.

Inertia solves this by showing all non-Inertia responses in a modal. Meaning you get the same beautiful error-reporting, even though you've made that request over XHR!

<div className="my-6 relative" style={{ paddingTop: '80.5%' }}>
  <iframe
    className="absolute inset-0 w-full h-full"
    src="https://player.vimeo.com/video/363562630?autoplay=1&loop=1&muted=1&background=1"
  ></iframe>
</div>

<Notice>Note, the modal behaviour is only intended for development purposes.</Notice>

## In production

In production you'll want to return a proper Inertia error response instead of relying on the modal behaviour. To do this you'll need to update your framework's default exception handler.

<TabbedCodeExamples
  examples={[
    {
      name: 'Laravel',
      language: 'php',
      code: dedent`
        public function render($request, Exception $exception)
        {
            if ($request->header('X-Inertia') {
                return Inertia::render('Error', [
                    'code' => $exception->getStatusCode(),
                    'message' => $exception->getMessage(),
                ]);
            }\n
            return parent::render($request, $exception);
        }
      `,
    },
    {
      name: 'Rails',
      language: 'ruby',
      code: dedent`
        # todo
      `,
    },
  ]}
/>
